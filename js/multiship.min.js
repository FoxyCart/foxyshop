function A(){jQuery('div.shipto_select').show();jQuery('div.shipto_name').hide();jQuery('div.shipto_name input').val('')}function b(){if(jQuery.cookie('shipto_names')){var B=jQuery.cookie('shipto_names').split('||');B=_(B);B.sort();return B}return!1}function c(){jQuery('div.shipto_select select').html('');var C='',_b=b();if(_b){jQuery.each(_b,function(i,D){(D!='undefined'&&D!='null'&&D!=''&&D!='Me')&&(C+='<option value="'+D+'">'+D+'<\/option>')});C!=''&&(C+='<option value="">- - - - - - - - -<\/option>')}C+='<option value="add_new">Add a new recipient...<\/option>';C+='<option value="">- - - - - - - - -<\/option>';C+='<option selected="selected" value="Me">Yourself<\/option>';jQuery('div.shipto_select select').html(C);jQuery('div.shipto_select select').change(function(){jQuery(this).val()=='add_new'?(jQuery(this).parents('form').find('div.shipto_name').show(),jQuery(this).parents('form').find('input[name*="shipto"]').val('')):(jQuery(this).parents('form').find('div.shipto_name').hide(),jQuery(this).parents('form').find('input[name*="shipto"]').val(jQuery(this).val()))});jQuery('div.shipto_select select').selectOptions('Me')}function d(){jQuery('input[name*="shipto"]').change(function(){jQuery(this).parents('form').find('input[name*="shipto"]').val(jQuery(this).val())})}jQuery(document).ready(()=>{A();c();d()});setCookie=()=>{typeof fc_PreProcess_custom=='function'&&fc_PreProcess_custom();var _a=!1,_B=jQuery.cookie('shipto_names'),_c=jQuery('input[name^="shipto"]').eq(0).val();jQuery.cookie('shipto_name_recent','',{expires:-1,path:'/',domain:location.host.match('[^.]+.[^.]+$')});jQuery.cookie('shipto_name_recent',_c,{expires:300,path:'/',domain:location.host.match('[^.]+.[^.]+$')});((_c!='undefined')&&(_c!='null')&&(_c!='me'))&&(jQuery.cookie('shipto_names','',{expires:-1,path:'/',domain:location.host.match('[^.]+.[^.]+$')}),jQuery.cookie('shipto_names',_B+'||'+_c,{expires:300,path:'/',domain:location.host.match('[^.]+.[^.]+$')}));return!0};constructShipTo=()=>{A();c()};fcc.events.cart.preprocess.add(setCookie);fcc.events.cart.postprocess.add(constructShipTo);function _(a){tmp=Array(0);for(i=0;i<a.length;i++)!f(tmp,a[i])&&(tmp.length+=1,tmp[tmp.length-1]=a[i]);return tmp}function f(a,e){for(j=0;j<a.length;j++)if(a[j]==e)return!0;return!1}jQuery.cookie=(_A,E,_C)=>{if(typeof E!='undefined'){_C=_C||{};E===null&&(E='',_C.expires=-1);var _d='',g=_C.domain?'; domain='+_C.domain:'',h=_C.secure?'; secure':'';if(_C.expires&&(typeof _C.expires=='number'||_C.expires.toUTCString)){var _e;typeof _C.expires=='number'?(_e=new Date(),_e.setTime(_e.getTime()+(_C.expires*24*60*60*1000))):(_e=_C.expires);_d='; expires='+_e.toUTCString()}var F=_C.path?'; path='+_C.path:'';document.cookie=[_A,'=',encodeURIComponent(E),_d,F,g,h].join('')}else{var I=null;if(document.cookie&&document.cookie!=''){var J=document.cookie.split(';');for(var i=0;i<J.length;i++){var l=jQuery.trim(J[i]);if(l.substring(0,_A.length+1)==(_A+'=')){I=decodeURIComponent(l.substring(_A.length+1));break}}}return I}};jQuery.fn.selectOptions=function(aA){this.each(function(){if(this.nodeName.toLowerCase()!='select')return;var aB=this.options.length;for(var i=0;i<aB;i++){this.options[i].value==aA&&(this.options[i].selected=!0);}});return this};
