function A(){jQuery('div.shipto_select').show();jQuery('div.shipto_name').hide();jQuery('div.shipto_name input').val('')}function _(){if(jQuery.cookie('shipto_names')){var C=jQuery.cookie('shipto_names').split('||');C=F(C);C.sort();return C}return!1}function B(){jQuery('div.shipto_select select').html('');var _a='',_b=_();if(_b){jQuery.each(_b,function(i,_B){(_B!='undefined'&&_B!='null'&&_B!=''&&_B!='Me')&&(_a+='<option value="'+_B+'">'+_B+'<\/option>')});_a!=''&&(_a+='<option value="">- - - - - - - - -<\/option>')}_a+='<option value="add_new">Add a new recipient...<\/option>';_a+='<option value="">- - - - - - - - -<\/option>';_a+='<option selected="selected" value="Me">Yourself<\/option>';jQuery('div.shipto_select select').html(_a);jQuery('div.shipto_select select').change(function(){jQuery(this).val()=='add_new'?(jQuery(this).parents('form').find('div.shipto_name').show(),jQuery(this).parents('form').find('input[name*="shipto"]').val('')):(jQuery(this).parents('form').find('div.shipto_name').hide(),jQuery(this).parents('form').find('input[name*="shipto"]').val(jQuery(this).val()))});jQuery.cookie('shipto_name_recent')!=''?jQuery('div.shipto_select select').val(jQuery.cookie('shipto_name_recent')).change():jQuery('div.shipto_select select').val('Me').change()}function D(){jQuery('input[name*="shipto"]').change(function(){jQuery(this).parents('form').find('input[name*="shipto"]').val(jQuery(this).val())})}jQuery(document).ready(()=>{A();B();D()});setCookie=e=>{typeof fc_PreProcess_custom=='function'&&fc_PreProcess_custom();var aA=!1,_c=jQuery.cookie('shipto_names'),_d=jQuery(e.element).find('input[name^="shipto"]').eq(0).val();jQuery.cookie('shipto_name_recent','',{expires:-1,path:'/',domain:location.host.match('[^.]+.[^.]+$')});jQuery.cookie('shipto_name_recent',_d,{expires:300,path:'/',domain:location.host.match('[^.]+.[^.]+$')});((_d!='undefined')&&(_d!='null')&&(_d!='Me'))&&(jQuery.cookie('shipto_names','',{expires:-1,path:'/',domain:location.host.match('[^.]+.[^.]+$')}),jQuery.cookie('shipto_names',_c+'||'+_d,{expires:300,path:'/',domain:location.host.match('[^.]+.[^.]+$')}));return!0};constructShipTo=e=>{A();B()};var E=E||{};E.onLoad=()=>{E.client.on('cart-submit',setCookie);E.client.on('cart-submit.done',constructShipTo)};function F(a){tmp=Array(0);for(i=0;i<a.length;i++)!G(tmp,a[i])&&(tmp.length+=1,tmp[tmp.length-1]=a[i]);return tmp}function G(a,e){for(j=0;j<a.length;j++)if(a[j]==e)return!0;return!1}(function(c){'function'===typeof define&&define.amd?define(['jquery'],c):'object'===typeof exports?c(require('jquery')):c(jQuery)})(c=>{function p(a){a=e.json?JSON.stringify(a):`${a}`;return e.raw?a:encodeURIComponent(a)}function n(a,g){var b;if(e.raw)b=a;else a:{var d=a;0===d.indexOf('"')&&(d=d.slice(1,-1).replaceAll('\"','"').replaceAll('\\','\\'));try{d=decodeURIComponent(d.replace(l,' '));b=e.json?JSON.parse(d):d;break}catch(h){}b=void 0}return c.isFunction(g)?g(b):b}var l=/\+/g,e=c.cookie=(a,g,b)=>{if(1<arguments.length&&!c.isFunction(g)){b=c.extend({},e.defaults,b);if('number'===typeof b.expires){var d=b.expires,h=b.expires=new Date();h.setTime(+h+864E5*d)}return document.cookie=[e.raw?a:encodeURIComponent(a),'=',p(g),b.expires?'; expires='+b.expires.toUTCString():'',b.path?'; path='+b.path:'',b.domain?'; domain='+b.domain:'',b.secure?'; secure':''].join('')}for(var d=a?void 0:{},h=document.cookie?document.cookie.split('; '):[],m=0,l=h.length;m<l;m++){var f=h[m].split('='),k;k=f.shift();!e.raw&&(k=decodeURIComponent(k));f=f.join('=');if(a&&a===k){d=n(f,g);break}a||void 0===f=n(f)||(d[k]=f)}return d};e.defaults={};c.removeCookie=(a,e)=>{if(void 0===c.cookie(a))return!1;c.cookie(a,'',c.extend({},e,{expires:-1}));return!c.cookie(a)}});
