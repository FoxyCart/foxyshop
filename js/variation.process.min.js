function foxyshop_is_array(o){return-1!=o.constructor.toString().indexOf("Array")}jQuery(document).ready((function(o){function e(e){if(e.is("form"))var a=e.attr("rel");else void 0===(a=e.parents("form").attr("rel"))&&(a=e.parent("form").attr("rel"));var s=o("#fs_price_"+a).val(),n=o("#originalprice_"+a).val(),_=o("#foxyshop_decimal_places").length?o("#foxyshop_decimal_places").val():100;s=parseFloat(s.replace(",",""))*_,n=parseFloat(n.replace(",",""))*_;var c="",p="",d="";o("#foxyshop_product_form_"+a+" .dkey").hide(),o("#foxyshop_product_form_"+a).find(".foxyshop_variations select option:selected, .foxyshop_variations input:checkbox:checked, .foxyshop_variations input:radio:checked").each((function(){var e=o(this);if("OPTION"==e.prop("tagName")){if(!e.parents("select").is(":visible"))return}else if(!e.is(":visible"))return;if(thisdisplaykey=e.attr("displaykey"),thisdisplaykey){dkeyarray=thisdisplaykey.split(",");for(var t=0;t<dkeyarray.length;t++)o("#foxyshop_product_form_"+a+' .dkey[dkey="'+dkeyarray[t]+'"]').show()}})),o("#foxyshop_product_form_"+a+" .dkey:hidden").each((function(){var e=o(this);e.is(":text")||e.is("textarea")?e.val(""):e.is("select")&&e.attr("selectedIndex","-1")})),foxyshop_visible_selector="","undefined"==typeof foxyshop_skip_hidden_selects&&(o("#foxyshop_product_form_"+a).find(".foxyshop_variations select, .foxyshop_variations input:radio, .foxyshop_variations input:text, .foxyshop_variations textarea").each((function(){var e;"x:shipto_name_select"!=o(this).attr("name")&&(o(this).is(":visible")?(e=o(this),currentname=e.attr("name"),"x:"==currentname.substr(0,2)&&e.attr("name",currentname.substr(2))):-1==o(this).attr("name").indexOf("shipto")&&function(o){currentname=o.attr("name"),"x:"!=currentname.substr(0,2)&&o.attr("name","x:"+currentname)}(o(this)))})),foxyshop_visible_selector=":visible"),o("#foxyshop_product_form_"+a).find(".foxyshop_variations select"+foxyshop_visible_selector+" option:selected, .foxyshop_variations input:checkbox:checked, .foxyshop_variations input:radio:checked"+foxyshop_visible_selector).each((function(){var e=o(this);if(imagekey=e.attr("imagekey"),""!=imagekey&&"undefined"!=typeof imagekey)for(i=0;i<ikey.length;i++)ikey[i][0]==imagekey&&(d=i);var t=e.attr("subfrequency");void 0!==t&&o("#fs_sub_frequency_"+a).val(t),varcodeadd=e.attr("codeadd"),""!=varcodeadd&&"undefined"!=typeof varcodeadd&&(p+=varcodeadd),varcode=e.attr("code"),""!=varcode&&"undefined"!=typeof varcode&&(c=varcode),priceChange=e.attr("pricechange"),priceSet=e.attr("priceset"),priceChange?(priceChangeAmount=parseFloat(priceChange),"-"==priceChange.substr(1,2)?(s-=priceChangeAmount,n-=priceChangeAmount):(s+=priceChangeAmount,n+=priceChangeAmount)):priceSet&&(s=parseFloat(priceSet),n=s)})),c||(c=o("#fs_code_"+a).val()),function(e,a,s,n,_,c){var p="#foxyshop_product_form_"+c,d=o("#foxyshop_decimal_places").length?o("#foxyshop_decimal_places").val():100;""==_&&0!==_||("function"==typeof window.foxyshop_before_image_change&&foxyshop_before_image_change(_),o(p+" .foxyshop_main_product_image").attr("src",ikey[_][2]).attr("alt",ikey[_][4]).parent().attr("href",ikey[_][3]),"function"==typeof window.foxyshop_cloudzoom_image_change?(foxyshop_cloudzoom_image_change(_),o("#foxyshop_cart_product_image_"+c).val(ikey[_][1])):o("#foxyshop_cart_product_image_"+c).val(ikey[_][1]),"function"==typeof window.foxyshop_after_image_change&&foxyshop_after_image_change(_));"undefined"==typeof arr_foxyshop_inventory&&(arr_foxyshop_inventory=[]);inventory_code=e,inventory_match_count=-1,a&&(inventory_code+=a);if(""!=inventory_code&&void 0!==arr_foxyshop_inventory[c])for(i=0;i<arr_foxyshop_inventory[c].length;i++)arr_foxyshop_inventory[c][i][0]==inventory_code&&(inventory_match_count=i);inventory_match_count>=0?(newcount=parseInt(arr_foxyshop_inventory[c][inventory_match_count][1]),newalert=parseInt(arr_foxyshop_inventory[c][inventory_match_count][2]),original_max_quantity=o("#original_quantity_max_"+c).val(),!foxyshop_allow_backorder&&newcount<original_max_quantity?o("#fs_quantity_max_"+c).val(newcount):foxyshop_allow_backorder||0!=original_max_quantity?!foxyshop_allow_backorder&&newcount>=original_max_quantity&&original_max_quantity>0?o("#fs_quantity_max_"+c).val(original_max_quantity):o("#fs_quantity_max_"+c).remove():o("#fs_quantity_max_"+c).val(newcount),newcount>0&&newcount<=newalert?(o(p+" .foxyshop_stock_alert").removeClass("foxyshop_out_of_stock").html(t(arr_foxyshop_inventory_stock_alert[c],newcount,inventory_code,o("#fs_name_"+c).val())).show(),o(p+" .productsubmit, "+p+" #productsubmit").removeAttr("disabled").removeClass("foxyshop_disabled")):newcount<=0?(o(p+" .foxyshop_stock_alert").addClass("foxyshop_out_of_stock").html(t(arr_foxyshop_inventory_stock_none[c],inventory_match_count,inventory_code,o("#fs_name_"+c).val())).show(),foxyshop_allow_backorder||o(p+" .productsubmit, "+p+" #productsubmit").attr("disabled","disabled").addClass("foxyshop_disabled")):(o(p+" .productsubmit, "+p+" #productsubmit").removeAttr("disabled").removeClass("foxyshop_disabled"),o(p+" .foxyshop_stock_alert").hide())):void 0!==arr_foxyshop_inventory[c]&&(foxyshop_allow_backorder||o("#fs_quantity_max_"+c).val(o("#original_quantity_max_"+c).val()),o(p+" .productsubmit, "+p+" #productsubmit").removeAttr("disabled").removeClass("foxyshop_disabled"),o(p+" .foxyshop_stock_alert").removeClass("foxyshop_out_of_stock").hide());var y=0;o(".foxyshop_quantity.foxyshop_addon_fields").prop("disabled",!0),o("input.foxyshop_addon_checkbox:checked").each((function(){current_id=o(this).attr("rel"),currentTotal=parseFloat(o("#addon_price_"+current_id).val())*d,o(".foxyshop_quantity.foxyshop_addon_fields[rel="+current_id+"]").prop("disabled",!1),o("input.foxyshop_quantity.foxyshop_addon_fields[rel="+current_id+"]").length>0?totalQty=o("input.foxyshop_quantity.foxyshop_addon_fields[rel="+current_id+"]").val():o("select.foxyshop_quantity.foxyshop_addon_fields[rel="+current_id+"]").length>0?totalQty=o("select.foxyshop_quantity.foxyshop_addon_fields[rel="+current_id+"] option:selected").text():totalQty=1,y+=currentTotal*totalQty})),l18n_settings=o("#foxyshop_l18n_"+c).val(),arrl18n_settings=l18n_settings.split("|"),currencySymbol=arrl18n_settings[0],decimalSeparator=arrl18n_settings[1],thousandsSeparator=arrl18n_settings[2],p_precedes=arrl18n_settings[3],n_sep_by_space=arrl18n_settings[4],s+=y,n+=y,o(p+" .foxyshop_main_price .foxyshop_currentprice, "+p+" #foxyshop_main_price .foxyshop_currentprice").text(r(s,currencySymbol,thousandsSeparator,decimalSeparator,p_precedes,n_sep_by_space)),o(p+" .foxyshop_main_price .foxyshop_oldprice, "+p+" #foxyshop_main_price .foxyshop_oldprice").text(r(n,currencySymbol,thousandsSeparator,decimalSeparator,p_precedes,n_sep_by_space)),"function"==typeof window.foxyshop_after_variation_modifiers&&foxyshop_after_variation_modifiers(e,a,s,n,_,c)}(c,p,s,n,d,a)}function t(o,e,t,r){return o=(o=o.replace("%code",t)).replace("%c",e),r=r||"",o=(o=1==e?o.replace("%s",""):o.replace("%s","s")).replace("%n",r)}function r(o,e,t,r,a,i){var s=0>o?"-":"";i=1==i?" ":"";var n,_,c=String(Math.round(Math.abs(o))),p="";for(e=e||"",t=t||"",r=r||".";c.length<3;)c="0"+c;for(_=c.substring(n=c.length-2);n>3;)p=t+c.substring(n-3,n)+p,n-=3;return p=c.substring(0,n)+p,1==a?s+e+i+p+r+_:s+p+r+_+i+e}o("form.foxyshop_product select, form.foxyshop_product input:checkbox, form.foxyshop_product input:radio").change((function(){e(o(this))})),o("form.foxyshop_product").each((function(){e(o(this))})),jQuery("form.foxyshop_product").submit((function(o){var e=jQuery(this).attr("rel"),t=!1;if(e&&jQuery("#foxyshop_product_form_"+e+" .foxyshop_required").each((function(){jQuery(this).is("select")&&jQuery(this).is(":visible")&&0==jQuery("option:selected",this).index()?(t=!0,alert("Error: You must select an option from the dropdown."),jQuery(this).focus()):jQuery(this).is(":visible")&&jQuery(this).is(":checkbox")&&!jQuery(this).is(":checked")?(t=!0,alert("Error: You must check this checkbox before adding to cart."),jQuery(this).focus()):jQuery(this).val()||jQuery(this).is("label")||(jQuery(this).hasClass("hiddenimageholder")&&jQuery(this).parents(".foxyshop_custom_upload_container").is(":visible")?(t=!0,alert("Error: You must upload a file before adding to cart.")):jQuery(this).is(":visible")&&(t=!0,alert("Error: You have not completed a required field."),jQuery(this).focus()))})),!t)return!jQuery("#foxyshop_product_form_"+e+" .productsubmit, #foxyshop_product_form_"+e+" #productsubmit").attr("disabled");o.stopPropagation(),o.preventDefault()}))}));