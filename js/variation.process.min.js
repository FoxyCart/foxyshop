jQuery(document).ready(function($){$('form.foxyshop_product select, form.foxyshop_product input:checkbox, form.foxyshop_product input:radio').change(function(){b($(this))});$('form.foxyshop_product').each(function(){b($(this))});function b(C){if(C.is('form'))var _b=C.attr('rel'),D=$(`#originalprice_${_b}`).val(),E=$('#foxyshop_decimal_places').length?$('#foxyshop_decimal_places').val():100,_g='',h='',I='';else{var _b=C.parents('form').attr('rel');typeof _b=='undefined'&&(_b=C.parent('form').attr('rel'))}var _c=$(`#fs_price_${_b}`).val();_c=parseFloat(_c.replace(',',''))*E;D=parseFloat(D.replace(',',''))*E;var _f='';$(`#foxyshop_product_form_${_b} .dkey`).hide();$(`#foxyshop_product_form_${_b}`).find('.foxyshop_variations select option:selected, .foxyshop_variations input:checkbox:checked, .foxyshop_variations input:radio:checked').each(function(){var _a=$(this);if(_a.prop('tagName')=='OPTION')if(!_a.parents('select').is(':visible'))return;else if(!_a.is(':visible'))return;thisdisplaykey=_a.attr('displaykey');if(!thisdisplaykey)return;dkeyarray=thisdisplaykey.split(',');for(var i=0;i<dkeyarray.length;i++)$('#foxyshop_product_form_'+_b+' .dkey[dkey="'+dkeyarray[i]+'"]').show()});$(`#foxyshop_product_form_${_b} .dkey:hidden`).each(function(){var _A=$(this);if(_A.is(':text')||_A.is('textarea'))_A.val('');else _A.is('select')&&_A.attr('selectedIndex','-1')});foxyshop_visible_selector='';typeof foxyshop_skip_hidden_selects=='undefined'&&($(`#foxyshop_product_form_${_b}`).find('.foxyshop_variations select, .foxyshop_variations input:radio, .foxyshop_variations input:text, .foxyshop_variations textarea').each(function(){if($(this).attr('name')!='x:shipto_name_select')if($(this).is(':visible'))_($(this));else if($(this).attr('name').indexOf('shipto')==-1)A($(this))}),foxyshop_visible_selector=':visible');$(`#foxyshop_product_form_${_b}`).find('.foxyshop_variations select'+foxyshop_visible_selector+' option:selected, .foxyshop_variations input:checkbox:checked, .foxyshop_variations input:radio:checked'+foxyshop_visible_selector).each(function(){var aA=$(this);imagekey=aA.attr('imagekey');if(imagekey!=''&&typeof imagekey!='undefined')for(i=0;i<ikey.length;i++)ikey[i][0]==imagekey&&(h=i);var _B=aA.attr('subfrequency');typeof _B!='undefined'&&$(`#fs_sub_frequency_${_b}`).val(_B);varcodeadd=aA.attr('codeadd');(varcodeadd!=''&&typeof varcodeadd!='undefined')&&(_g+=varcodeadd);varcode=aA.attr('code');(varcode!=''&&typeof varcode!='undefined')&&(_f=varcode);priceChange=aA.attr('pricechange');priceSet=aA.attr('priceset');if(priceChange){priceChangeAmount=parseFloat(priceChange);priceChange.substr(1,2)=='-'?(_c=_c-priceChangeAmount,D=D-priceChangeAmount):(_c=_c+priceChangeAmount,D=D+priceChangeAmount)}else priceSet&&(_c=parseFloat(priceSet),D=_c)});!_f&&(_f=$(`#fs_code_${_b}`).val());B(_f,_g,_c,D,h,_b)}function A(aB){currentname=aB.attr('name');currentname.substr(0,2)!='x:'&&aB.attr('name',`x:${currentname}`)}function _(aC){currentname=aC.attr('name');currentname.substr(0,2)=='x:'&&aC.attr('name',currentname.substr(2))}function B(aD,aE,_C,_d,_e,_F){var _G=`#foxyshop_product_form_${_F}`,H=$('#foxyshop_decimal_places').length?$('#foxyshop_decimal_places').val():100;if(_e!=''||_e===0){typeof window.foxyshop_before_image_change=='function'&&foxyshop_before_image_change(_e);$(`${_G} .foxyshop_main_product_image`).attr('src',ikey[_e][2]).attr('alt',ikey[_e][4]).parent().attr('href',ikey[_e][3]);typeof window.foxyshop_cloudzoom_image_change=='function'?(foxyshop_cloudzoom_image_change(_e),$(`#foxyshop_cart_product_image_${_F}`).val(ikey[_e][1])):($(`#foxyshop_cart_product_image_${_F}`).val(ikey[_e][1]));typeof window.foxyshop_after_image_change=='function'&&foxyshop_after_image_change(_e)}typeof arr_foxyshop_inventory=='undefined'&&(arr_foxyshop_inventory=[]);inventory_code=aD;inventory_match_count=-1;aE&&(inventory_code+=aE);if(inventory_code!=''&&typeof arr_foxyshop_inventory[_F]!='undefined')for(i=0;i<arr_foxyshop_inventory[_F].length;i++)arr_foxyshop_inventory[_F][i][0]==inventory_code&&(inventory_match_count=i);if(inventory_match_count>=0){newcount=parseInt(arr_foxyshop_inventory[_F][inventory_match_count][1]);newalert=parseInt(arr_foxyshop_inventory[_F][inventory_match_count][2]);original_max_quantity=$(`#original_quantity_max_${_F}`).val();if(!foxyshop_allow_backorder&&newcount<original_max_quantity)$(`#fs_quantity_max_${_F}`).val(newcount);else if(!foxyshop_allow_backorder&&original_max_quantity==0)$(`#fs_quantity_max_${_F}`).val(newcount);else !foxyshop_allow_backorder&&newcount>=original_max_quantity&&original_max_quantity>0?$(`#fs_quantity_max_${_F}`).val(original_max_quantity):$(`#fs_quantity_max_${_F}`).remove();if(newcount>0&&newcount<=newalert){$(`${_G} .foxyshop_stock_alert`).removeClass('foxyshop_out_of_stock').html(F(arr_foxyshop_inventory_stock_alert[_F],newcount,inventory_code,$(`#fs_name_${_F}`).val(),)).show();$(_G+' .productsubmit, '+_G+' #productsubmit').removeAttr('disabled').removeClass('foxyshop_disabled')}else if(newcount<=0){$(`${_G} .foxyshop_stock_alert`).addClass('foxyshop_out_of_stock').html(F(arr_foxyshop_inventory_stock_none[_F],inventory_match_count,inventory_code,$(`#fs_name_${_F}`).val(),)).show();!foxyshop_allow_backorder&&$(_G+' .productsubmit, '+_G+' #productsubmit').attr('disabled','disabled').addClass('foxyshop_disabled')}else{$(_G+' .productsubmit, '+_G+' #productsubmit').removeAttr('disabled').removeClass('foxyshop_disabled');$(`${_G} .foxyshop_stock_alert`).hide()}}else if(typeof arr_foxyshop_inventory[_F]!='undefined'){!foxyshop_allow_backorder&&$(`#fs_quantity_max_${_F}`).val($(`#original_quantity_max_${_F}`).val());$(_G+' .productsubmit, '+_G+' #productsubmit').removeAttr('disabled').removeClass('foxyshop_disabled');$(`${_G} .foxyshop_stock_alert`).removeClass('foxyshop_out_of_stock').hide()}var _i=0;$('.foxyshop_quantity.foxyshop_addon_fields').prop('disabled',!0);$('input.foxyshop_addon_checkbox:checked').each(function(){current_id=$(this).attr('rel');currentTotal=parseFloat($(`#addon_price_${current_id}`).val())*H;$(`.foxyshop_quantity.foxyshop_addon_fields[rel=${current_id}]`).prop('disabled',!1);if($(`input.foxyshop_quantity.foxyshop_addon_fields[rel=${current_id}]`).length>0)totalQty=$(`input.foxyshop_quantity.foxyshop_addon_fields[rel=${current_id}]`).val();else $(`select.foxyshop_quantity.foxyshop_addon_fields[rel=${current_id}]`).length>0?totalQty=$(`select.foxyshop_quantity.foxyshop_addon_fields[rel=${current_id}] option:selected`).text():totalQty=1;_i+=(currentTotal*totalQty)});l18n_settings=$(`#foxyshop_l18n_${_F}`).val();arrl18n_settings=l18n_settings.split('|');currencySymbol=arrl18n_settings[0];decimalSeparator=arrl18n_settings[1];thousandsSeparator=arrl18n_settings[2];p_precedes=arrl18n_settings[3];n_sep_by_space=arrl18n_settings[4];_C+=_d+=_i;$(_G+' .foxyshop_main_price .foxyshop_currentprice, '+_G+' #foxyshop_main_price .foxyshop_currentprice').text(G(_C,currencySymbol,thousandsSeparator,decimalSeparator,p_precedes,n_sep_by_space,));$(_G+' .foxyshop_main_price .foxyshop_oldprice, '+_G+' #foxyshop_main_price .foxyshop_oldprice').text(G(_d,currencySymbol,thousandsSeparator,decimalSeparator,p_precedes,n_sep_by_space,));typeof window.foxyshop_after_variation_modifiers=='function'&&foxyshop_after_variation_modifiers(aD,aE,_C,_d,_e,_F)}function F(aF,aG,aH,_D){aF=aF.replace('%code',aH);aF=aF.replace('%c',aG);aG==1?aF=aF.replace('%s',''):aF=aF.replace('%s','s');_D=_D||'';aF=aF.replace('%n',_D);return aF}function G(n,c,g,d,_E,aI){var s=(0>n)?'-':'';aI==1?aI=' ':aI='';var m=`${Math.round(Math.abs(n))}`;var i='',j,f;c=c||'';g=g||'';d=d||'.';while (m.length<3)m=`0${m}`;f=m.substring(j=m.length-2);while (j>3) {i=g+m.substring(j-3,j)+i;j-=3}i=m.substring(0,j)+i;if(_E==1)return s+c+aI+i+d+f;return s+i+d+f+aI+c}jQuery('form.foxyshop_product').submit(function(e){var aJ=jQuery(this).attr('rel'),aK=!1;aJ&&jQuery(`#foxyshop_product_form_${aJ} .foxyshop_required`).each(function(){if(jQuery(this).is('select')&&jQuery(this).is(':visible')&&jQuery('option:selected',this).index()==0){aK=!0;alert('Error: You must select an option from the dropdown.');jQuery(this).focus()}else if(jQuery(this).is(':visible')&&jQuery(this).is(':checkbox')&&!jQuery(this).is(':checked')){aK=!0;alert('Error: You must check this checkbox before adding to cart.');jQuery(this).focus()}else if(!jQuery(this).val()&&!jQuery(this).is('label'))if(jQuery(this).hasClass('hiddenimageholder')&&jQuery(this).parents('.foxyshop_custom_upload_container').is(':visible')){aK=!0;alert('Error: You must upload a file before adding to cart.')}else if(jQuery(this).is(':visible')){aK=!0;alert('Error: You have not completed a required field.');jQuery(this).focus()}});if(aK){e.stopPropagation();e.preventDefault()}else{if(jQuery('#foxyshop_product_form_'+aJ+' .productsubmit, #foxyshop_product_form_'+aJ+' #productsubmit').attr('disabled'))return!1;return!0}})});function a(aL){if(`${aL.constructor}`.indexOf('Array')==-1)return!1;return!0}
